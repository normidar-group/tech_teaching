# Collection 集合

> Collection 标准翻译为「集合」，表示的是一群数据(嗯，很多数据的意思，这里不想用太复杂的词)

比较常用的有「List：列表」「Map：字典」这两种。其它还有几种，我在后面的扩展中随便讲讲。（使用List和Map就可以做到大部分想做的事情了，所以重点讲这两个。）

这篇先讲讲List。


## List 列表， 数组

> 很多语言中列表(List)和数组(Array)是不同的东西，但在这里我们不做区分，都叫做列表。（Dart中也基本上可以不作区分都使用List）

那么列表（数组）是什么？

举个例子：

在日本的樱花开花有一套的计算方法叫做400度法则，说的是从2月1日开始取每天的平均气温，当累计温度达到400度时，樱花就会开花。

在这个例子中，我们可以用一个列表来存储每天的气温，然后计算累计温度。

在Dart中，我们可以这样定义一个列表(数据来自[这里](https://www.data.jma.go.jp/obd/stats/etrn/view/nml_sfc_d.php?prec_no=44&block_no=47662&year=&month=2&day=&view=p1))：

```dart
List<double> temps = [5.4, 5.4, 5.5, 5.5, 5.5, 5.6, 5.6, 5.6, 5.7, 5.7, 5.8, 5.9, 5.9, 6.0, 6.1, 6.1, 6.2, 6.3, 6.4, 6.4, 6.5, 6.6, 6.7, 6.9, 7.0, 7.1, 7.2, 7.3, 7.4];

print(temps);
```

这样就定义了一个列表，列表中的每个元素都是一个小数。里面的每个小数我们称为元素(Element)或者项（item）。

> 留意点：在Dart中，列表是一个泛型（Generic）类型，这里我们定义了一个`List<double>`（尖括号里的是列表内的东西的类型），表示这个列表中的元素都是double类型的。暂时不用太深入理解泛型，后面会讲到泛型。可以随便查下谷歌，不懂也没事。


## 元素操控

列表可以被：添加、删除、修改、取出。

> 了解过数据库的人可能知道，有个成语叫做CRUD，就是Create、Read、Update、Delete的缩写。中文是「增删改查」。

### 查之操控 🪄

在数组中有叫做索引的概念，它表示的是元素在数组中的位置，索引从0开始。

我们可以通过索引来获取数组中的元素：

```dart
List<double> temps = [5.4, 5.4, 5.5, 5.5, 5.5, 5.6, 5.6, 5.6, 5.7, 5.7, 5.8, 5.9, 5.9, 6.0, 6.1, 6.1, 6.2, 6.3, 6.4, 6.4, 6.5, 6.6, 6.7, 6.9, 7.0, 7.1, 7.2, 7.3, 7.4];

print(temps[0]); // 5.4
print(temps[1]); // 5.4
print(temps[2]); // 5.5
```

这样就可以获取到数组中的元素了。

有时候我们会用到数组的长度，可以使用`length`属性来获取数组的长度，而数组的长度减一就是该数组的最后的索引：

```dart
...
print(temps.length); // 29
print(temps[temps.length - 1]); // 7.4
```

### 改之操控 🪄

修改数组中的元素：

```dart
List<double> temps = [5.4, 5.4, 5.5, 5.5, 5.5, 5.6, 5.6, 5.6, 5.7, 5.7, 5.8, 5.9, 5.9, 6.0, 6.1, 6.1, 6.2, 6.3, 6.4, 6.4, 6.5, 6.6, 6.7, 6.9, 7.0, 7.1, 7.2, 7.3, 7.4];

temps[0] = 5.3;
print(temps);
```

嗯，自己执行下看看吧。


### 增之操控 🪄

添加元素到列表中，在Dart使用`add`方法：

```dart
List<double> temps = [5.4, 5.4, 5.5, 5.5, 5.5, 5.6, 5.6, 5.6, 5.7, 5.7, 5.8, 5.9, 5.9, 6.0, 6.1, 6.1, 6.2, 6.3, 6.4, 6.4, 6.5, 6.6, 6.7, 6.9, 7.0, 7.1, 7.2, 7.3, 7.4];

temps.add(7.5);
print(temps);
```

'7.5'会被添加到列表的最后。列表的长度也会因此被加一。

### 删除

看例子：

```dart
List<int> temps = [1, 2, 3];

temps.removeAt(1); // 删除索引为1的元素, 这里注意一下索引是1就表示是第二个元素
print(temps); // [1, 3]
```

## 深入(不是必要的，但是是有用的)

### [扩展运算符](https://dart.dev/language/collections#spread-operators)

链接：https://dart.dev/language/collections#spread-operators

进入链接右键翻译可以看到官方解释。

假设有个列表是这样：

```dart
List l = [1, 2, 3];
```

当我们想把它装入其它列表时我们可以使用一种快捷的方法：

```dart
List l = [1, 2, 3];
List lst = [0, ...l];
print(lst);
```

运行下看看吧。

深入思考🤔，为什么这不是必要的。（参考For的相关课程）


## 扩展(可以跳过不看)

### Tuple 元组

元组是一种不可变的列表，它的长度和类型是固定的。

在Dart的新版本中才有元组类型，它是其它语言中常见的数据结构。

```dart
(int, String) t = (1, 'hello'); // 不太理解的话可以先尝试使用var来定义: var t = (1, 'hello');
print(t);
```

这里的类型和值都用小扩号括起来了, 这就是元组，不能改变里面的值，也不能增加或者删除元素。（在很后面会讲到，其实限制对于编程来讲是很重要的）


## 尝试一下

- 创建一个列表，里面存储一些字符串，然后打印出来。
- 修改列表中的一个元素，然后打印出来。
- 添加一个元素到列表中，然后打印出来。
- 删除列表中的一个元素，然后打印出来。
